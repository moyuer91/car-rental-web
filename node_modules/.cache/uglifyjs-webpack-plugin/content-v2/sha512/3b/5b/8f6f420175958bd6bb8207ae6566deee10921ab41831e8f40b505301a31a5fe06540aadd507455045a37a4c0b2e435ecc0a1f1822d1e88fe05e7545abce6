{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[41],{XvAv:function(e,t,a){e.exports={tableList:\"antd-pro-pages-visa-visa-list-tableList\",tableListOperator:\"antd-pro-pages-visa-visa-list-tableListOperator\",tableListForm:\"antd-pro-pages-visa-visa-list-tableListForm\",submitButtons:\"antd-pro-pages-visa-visa-list-submitButtons\"}},Yx7n:function(e,t,a){\"use strict\";a.r(t);var n,r,l,i,s=a(\"jehZ\"),o=a.n(s),c=(a(\"IzEo\"),a(\"bx4M\")),d=(a(\"Awhp\"),a(\"KrTs\")),m=(a(\"iQDF\"),a(\"+eQT\")),p=(a(\"14J3\"),a(\"BMrR\")),u=(a(\"Pwec\"),a(\"CtXQ\")),h=(a(\"+L6B\"),a(\"2/Rp\")),v=(a(\"jCWc\"),a(\"kPKH\")),f=a(\"p0pE\"),y=a.n(f),E=a(\"2Taf\"),b=a.n(E),g=a(\"vZ4D\"),w=a.n(g),F=a(\"l4Ni\"),C=a.n(F),I=a(\"ujKo\"),k=a.n(I),L=a(\"MhPg\"),S=a.n(L),x=(a(\"2qtc\"),a(\"kLXV\")),M=(a(\"5NDa\"),a(\"5rEg\")),D=(a(\"OaEy\"),a(\"2fM7\")),V=(a(\"y8nQ\"),a(\"Vl3Y\")),A=a(\"q1tI\"),O=a.n(A),R=a(\"MuoO\"),N=a(\"wd/R\"),Y=a.n(N),q=a(\"CkN6\"),T=a(\"LIIa\"),j=a(\"XvAv\"),B=a.n(j),H=a(\"34ay\"),z=V[\"a\"].Item,K=D[\"a\"].Option,P=function(e){return Object.keys(e).map(function(t){return e[t]}).join(\",\")},Q=[\"default\",\"processing\",\"success\",\"error\"],U=[\"\\u8349\\u7a3f\",\"\\u5904\\u7406\\u4e2d\",\"\\u5df2\\u5b8c\\u6210\",\"\\u5f02\\u5e38\"],X=V[\"a\"].create()(function(e){var t=e.modalVisible,a=e.form,n=e.handleAdd,r=e.handleModalVisible,l=e.initInfo,i=l.countryItems,s=l.presentCityItems,o=l.typeItems,c=function(){a.validateFields(function(e,t){e||(a.resetFields(),n(t))})};return O.a.createElement(x[\"a\"],{destroyOnClose:!0,title:\"\\u65b0\\u5efa\\u7b7e\\u8bc1\\u7533\\u8bf7\",visible:t,onOk:c,onCancel:function(){return r()}},O.a.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u7533\\u8bf7\\u4eba\"},a.getFieldDecorator(\"applicant\",{rules:[{required:!0,message:\"\\u8bf7\\u8f93\\u5165\\u7533\\u8bf7\\u4eba\\u59d3\\u540d\\uff01\"}]})(O.a.createElement(M[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\"}))),O.a.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u7533\\u8bf7\\u56fd\\u5bb6\"},a.getFieldDecorator(\"country\",{rules:[{required:!0,message:\"\\u8bf7\\u9009\\u62e9\\u7533\\u8bf7\\u56fd\\u5bb6\\uff01\"}]})(O.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\",style:{width:\"100%\"}},i))),O.a.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u7b7e\\u8bc1\\u7c7b\\u578b\"},a.getFieldDecorator(\"type\",{rules:[{required:!0,message:\"\\u8bf7\\u9009\\u62e9\\u7b7e\\u8bc1\\u7c7b\\u578b\\uff01\"}]})(O.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\",style:{width:\"100%\"}},o))),O.a.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u9001\\u7b7e\\u57ce\\u5e02\"},a.getFieldDecorator(\"city\",{rules:[{required:!0,message:\"\\u8bf7\\u9009\\u62e9\\u9001\\u7b7e\\u57ce\\u5e02\\uff01\"}]})(O.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\",style:{width:\"100%\"}},s))),O.a.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u8bc1\\u4ef6\\u53f7\\u7801\"},a.getFieldDecorator(\"docNo\",{rules:[{required:!0,message:\"\\u8bf7\\u8f93\\u5165\\u8bc1\\u4ef6\\u53f7\\u7801\\uff01\"}]})(O.a.createElement(M[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\"}))),O.a.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u8054\\u7cfb\\u7535\\u8bdd\"},a.getFieldDecorator(\"phone\",{rules:[{required:!0,message:\"\\u8bf7\\u8f93\\u5165\\u8054\\u7cfb\\u7535\\u8bdd\\uff01\"}]})(O.a.createElement(M[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\"}))))}),J=(n=Object(R[\"connect\"])(function(e){var t=e.visaList,a=e.loading;return{visaList:t,loading:a.models.visaList}}),r=V[\"a\"].create(),n(l=r((i=function(e){function t(){var e,a;b()(this,t);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return a=C()(this,(e=k()(t)).call.apply(e,[this].concat(r))),a.state={modalVisible:!1,expandForm:!1,selectedRows:[],formValues:{}},a.handleStandardTableChange=function(e,t,n){var r=a.props.dispatch,l=a.state.formValues,i=Object.keys(t).reduce(function(e,a){var n=y()({},e);return n[a]=P(t[a]),n},{}),s=y()({pageNum:e.current,pageSize:e.pageSize},l,i);n.field&&(s.orderBy=\"\".concat(n.field,\" \").concat(\"descend\"===n.order?\"desc\":\"asc\")),r({type:\"visaList/fetch\",payload:s})},a.previewItem=function(e){window.open(\"/visa/applform/\".concat(e,\"?token=\").concat(window.DM_AUTH))},a.handleFormReset=function(){var e=a.props,t=e.form,n=e.dispatch;t.resetFields(),a.setState({formValues:{}}),n({type:\"visaList/fetch\",payload:{}})},a.toggleForm=function(){var e=a.state.expandForm;a.setState({expandForm:!e})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleSearch=function(e){e.preventDefault();var t=a.props,n=t.dispatch,r=t.form;r.validateFields(function(e,t){if(!e){var r=y()({},t,{createdAt:t.createdAt&&t.createdAt.format(\"YYYY-MM-DD\")});a.setState({formValues:r}),n({type:\"visaList/fetch\",payload:r})}})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e})},a.handleUpdateModalVisible=function(e,t){window.open(\"/visa/applform/\".concat(t.id,\"?token=\").concat(window.DM_AUTH))},a.handleAdd=function(e){var t=a.props.dispatch;t({type:\"visaList/add\",payload:y()({},e)}),a.handleModalVisible()},a}return S()(t,e),w()(t,[{key:\"componentDidMount\",value:function(){var e=this.props,t=e.dispatch,a=e.location.query;Object(H[\"d\"])(a.token),t({type:\"visaList/init\"}),t({type:\"visaList/fetch\",payload:{pageNum:1,pageSize:10}})}},{key:\"renderSimpleForm\",value:function(e){var t=e.countryItems,a=e.typeItems,n=this.props.form.getFieldDecorator;return O.a.createElement(V[\"a\"],{onSubmit:this.handleSearch,layout:\"inline\"},O.a.createElement(p[\"a\"],{gutter:{md:8,lg:24,xl:48}},O.a.createElement(v[\"a\"],{md:8,sm:24},O.a.createElement(z,{label:\"\\u7533\\u8bf7\\u56fd\\u5bb6\"},n(\"country\")(O.a.createElement(D[\"a\"],{showSearch:!0,placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"},filterOption:function(e,t){return t.props.children.indexOf(e)>=0}},t)))),O.a.createElement(v[\"a\"],{md:8,sm:24},O.a.createElement(z,{label:\"\\u7c7b\\u578b\"},n(\"type\")(O.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"}},a)))),O.a.createElement(v[\"a\"],{md:8,sm:24},O.a.createElement(\"span\",{className:B.a.submitButtons},O.a.createElement(h[\"a\"],{type:\"primary\",htmlType:\"submit\"},\"\\u67e5\\u8be2\"),O.a.createElement(h[\"a\"],{style:{marginLeft:8},onClick:this.handleFormReset},\"\\u91cd\\u7f6e\"),O.a.createElement(\"a\",{style:{marginLeft:8},onClick:this.toggleForm},\"\\u5c55\\u5f00 \",O.a.createElement(u[\"a\"],{type:\"down\"}))))))}},{key:\"renderAdvancedForm\",value:function(e){var t=e.countryItems,a=e.presentCityItems,n=e.typeItems,r=e.statusItems,l=this.props.form.getFieldDecorator;return O.a.createElement(V[\"a\"],{onSubmit:this.handleSearch,layout:\"inline\"},O.a.createElement(p[\"a\"],{gutter:{md:8,lg:24,xl:48}},O.a.createElement(v[\"a\"],{md:8,sm:24},O.a.createElement(z,{label:\"\\u7533\\u8bf7\\u56fd\\u5bb6\"},l(\"country\")(O.a.createElement(D[\"a\"],{showSearch:!0,placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"},filterOption:function(e,t){return t.props.children.indexOf(e)>=0}},t)))),O.a.createElement(v[\"a\"],{md:8,sm:24},O.a.createElement(z,{label:\"\\u7c7b\\u578b\"},l(\"type\")(O.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"}},n)))),O.a.createElement(v[\"a\"],{md:8,sm:24},O.a.createElement(z,{label:\"\\u72b6\\u6001\"},l(\"Status\")(O.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"}},r))))),O.a.createElement(p[\"a\"],{gutter:{md:8,lg:24,xl:48}},O.a.createElement(v[\"a\"],{md:8,sm:24},O.a.createElement(z,{label:\"\\u7533\\u8bf7\\u4eba\"},l(\"applicant\")(O.a.createElement(M[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\",style:{width:\"100%\"}})))),O.a.createElement(v[\"a\"],{md:8,sm:24},O.a.createElement(z,{label:\"\\u9001\\u7b7e\\u57ce\\u5e02\"},l(\"city\")(O.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"}},a)))),O.a.createElement(v[\"a\"],{md:8,sm:24},O.a.createElement(z,{label:\"\\u521b\\u5efa\\u65e5\\u671f\"},l(\"createdAt\")(O.a.createElement(m[\"a\"],{style:{width:\"100%\"},placeholder:\"\\u8bf7\\u8f93\\u5165\\u521b\\u5efa\\u65e5\\u671f\"}))))),O.a.createElement(\"div\",{style:{overflow:\"hidden\"}},O.a.createElement(\"div\",{style:{marginBottom:24}},O.a.createElement(h[\"a\"],{type:\"primary\",htmlType:\"submit\"},\"\\u67e5\\u8be2\"),O.a.createElement(h[\"a\"],{style:{marginLeft:8},onClick:this.handleFormReset},\"\\u91cd\\u7f6e\"),O.a.createElement(\"a\",{style:{marginLeft:8},onClick:this.toggleForm},\"\\u6536\\u8d77 \",O.a.createElement(u[\"a\"],{type:\"up\"})))))}},{key:\"renderForm\",value:function(e){var t=this.state.expandForm;return t?this.renderAdvancedForm(e):this.renderSimpleForm(e)}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.visaList,n=a.visaList,r=a.initInfo,l=a.pagination,i=t.loading,s={list:n,pagination:l},m=r.countries,p=r.presentCities,u=r.types,v=r.statusOpts,f={};if(m)for(var y=0;y<m.length;y+=1){var E=m[y];f[E.value]=E.label}var b={};if(u)for(var g=0;g<u.length;g+=1){var w=u[g];b[w.value]=w.label}var F={};if(p)for(var C=0;C<p.length;C+=1){var I=p[C];F[I.value]=I.label}var k=[];m&&(k=m.map(function(e){return O.a.createElement(K,{key:e.value,value:e.value},e.label)}));var L=[];p&&(L=p.map(function(e){return O.a.createElement(K,{key:e.value,value:e.value},e.label)}));var S=[];u&&(S=u.map(function(e){return O.a.createElement(K,{key:e.value,value:e.value},e.label)}));var x=[];v&&(x=v.map(function(e){return O.a.createElement(K,{key:e.value,value:e.value},e.label)}));var M={countryItems:k,presentCityItems:L,typeItems:S,statusItems:x},D=this.state,V=D.selectedRows,R=D.modalVisible,N={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible},j=[{title:\"\\u7f16\\u53f7\",dataIndex:\"id\",render:function(t,a){return O.a.createElement(\"a\",{onClick:function(){return e.previewItem(a.id)}},t)}},{title:\"\\u7533\\u8bf7\\u4eba\",dataIndex:\"applicant\",render:function(e){return e}},{title:\"\\u56fd\\u5bb6\",dataIndex:\"country\",sorter:!0,render:function(e){return f[e]?f[e]:e}},{title:\"\\u7c7b\\u578b\",dataIndex:\"type\",sorter:!0,render:function(e){return b[e]?b[e]:e}},{title:\"\\u624b\\u673a\\u53f7\",dataIndex:\"phone\"},{title:\"\\u62a4\\u7167\\u53f7\",dataIndex:\"docNo\"},{title:\"\\u9001\\u7b7e\\u57ce\\u5e02\",dataIndex:\"city\",sorter:!0,render:function(e){return F[e]?F[e]:e}},{title:\"\\u521b\\u5efa\\u65f6\\u95f4\",dataIndex:\"createdAt\",sorter:!0,render:function(e){return O.a.createElement(\"span\",null,Y()(e).format(\"YYYY-MM-DD HH:mm:ss\"))}},{title:\"\\u72b6\\u6001\",dataIndex:\"status\",render:function(e){return O.a.createElement(d[\"a\"],{status:Q[e],text:U[e]})}},{title:\"\\u64cd\\u4f5c\",render:function(t,a){return O.a.createElement(A[\"Fragment\"],null,O.a.createElement(\"a\",{onClick:function(){return e.handleUpdateModalVisible(!0,a)}},\"\\u4fee\\u6539\"))}}];return O.a.createElement(\"div\",null,O.a.createElement(T[\"a\"],{title:\"\\u7b7e\\u8bc1\\u4fe1\\u606f\\u7ba1\\u7406\"}),O.a.createElement(c[\"a\"],{bordered:!1},O.a.createElement(\"div\",{className:B.a.tableList},O.a.createElement(\"div\",{className:B.a.tableListForm},this.renderForm(M)),O.a.createElement(\"div\",{className:B.a.tableListOperator},O.a.createElement(h[\"a\"],{icon:\"plus\",type:\"primary\",onClick:function(){return e.handleModalVisible(!0)}},\"\\u65b0\\u5efa\"),V.length>0&&O.a.createElement(\"span\",null,O.a.createElement(h[\"a\"],null,\"\\u5220\\u9664\"))),O.a.createElement(q[\"a\"],{rowKey:\"id\",selectedRows:V,loading:i,data:s,columns:j,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),O.a.createElement(X,o()({},N,{modalVisible:R,initInfo:M})))}}]),t}(A[\"PureComponent\"]),l=i))||l)||l);t[\"default\"]=J}}]);","extractedComments":[]}