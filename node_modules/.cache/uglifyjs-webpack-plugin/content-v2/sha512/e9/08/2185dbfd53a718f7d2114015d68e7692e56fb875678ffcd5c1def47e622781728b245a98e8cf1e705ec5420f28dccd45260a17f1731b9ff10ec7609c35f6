{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[41],{XvAv:function(e,t,a){e.exports={tableList:\"antd-pro-pages-visa-visa-list-tableList\",tableListOperator:\"antd-pro-pages-visa-visa-list-tableListOperator\",tableListForm:\"antd-pro-pages-visa-visa-list-tableListForm\",submitButtons:\"antd-pro-pages-visa-visa-list-submitButtons\"}},Yx7n:function(e,t,a){\"use strict\";a.r(t);var l,r,n,i,s=a(\"jehZ\"),o=a.n(s),c=(a(\"IzEo\"),a(\"bx4M\")),d=(a(\"Awhp\"),a(\"KrTs\")),m=(a(\"iQDF\"),a(\"+eQT\")),p=(a(\"14J3\"),a(\"BMrR\")),u=(a(\"Pwec\"),a(\"CtXQ\")),h=(a(\"+L6B\"),a(\"2/Rp\")),v=(a(\"jCWc\"),a(\"kPKH\")),y=a(\"p0pE\"),f=a.n(y),E=a(\"2Taf\"),b=a.n(E),g=a(\"vZ4D\"),w=a.n(g),C=a(\"l4Ni\"),F=a.n(C),I=a(\"ujKo\"),L=a.n(I),k=a(\"MhPg\"),S=a.n(k),x=(a(\"2qtc\"),a(\"kLXV\")),V=(a(\"5NDa\"),a(\"5rEg\")),D=(a(\"OaEy\"),a(\"2fM7\")),M=(a(\"y8nQ\"),a(\"Vl3Y\")),A=a(\"q1tI\"),O=a.n(A),N=a(\"MuoO\"),R=a(\"wd/R\"),q=a.n(R),Y=a(\"CkN6\"),j=a(\"LIIa\"),B=a(\"XvAv\"),T=a.n(B),z=a(\"34ay\"),K=M[\"a\"].Item,P=D[\"a\"].Option,Q=function(e){return Object.keys(e).map(function(t){return e[t]}).join(\",\")},X=[\"default\",\"processing\",\"success\",\"error\"],H=[\"\\u8349\\u7a3f\",\"\\u5904\\u7406\\u4e2d\",\"\\u5df2\\u5b8c\\u6210\",\"\\u5f02\\u5e38\"],J=M[\"a\"].create()(function(e){var t=e.modalVisible,a=e.form,l=e.handleAdd,r=e.handleModalVisible,n=e.initInfo,i=n.countryItems,s=n.presentCityItems,o=n.typeItems,c=function(){a.validateFields(function(e,t){e||(a.resetFields(),l(t))})};return O.a.createElement(x[\"a\"],{destroyOnClose:!0,title:\"\\u65b0\\u5efa\\u7b7e\\u8bc1\\u7533\\u8bf7\",visible:t,onOk:c,onCancel:function(){return r()}},O.a.createElement(K,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u8ba2\\u5355\\u7f16\\u53f7\"},a.getFieldDecorator(\"appOrderNo\",{rules:[{required:!0,message:\"\\u8bf7\\u8f93\\u5165\\u8ba2\\u5355\\u7f16\\u53f7\\uff01\"}]})(O.a.createElement(V[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\"}))),O.a.createElement(K,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u7533\\u8bf7\\u4eba\"},a.getFieldDecorator(\"applicant\",{rules:[{required:!0,message:\"\\u8bf7\\u8f93\\u5165\\u7533\\u8bf7\\u4eba\\u59d3\\u540d\\uff01\"}]})(O.a.createElement(V[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\"}))),O.a.createElement(K,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u7533\\u8bf7\\u56fd\\u5bb6\"},a.getFieldDecorator(\"country\",{rules:[{required:!0,message:\"\\u8bf7\\u9009\\u62e9\\u7533\\u8bf7\\u56fd\\u5bb6\\uff01\"}]})(O.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\",style:{width:\"100%\"}},i))),O.a.createElement(K,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u7b7e\\u8bc1\\u7c7b\\u578b\"},a.getFieldDecorator(\"type\",{rules:[{required:!0,message:\"\\u8bf7\\u9009\\u62e9\\u7b7e\\u8bc1\\u7c7b\\u578b\\uff01\"}]})(O.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\",style:{width:\"100%\"}},o))),O.a.createElement(K,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u9001\\u7b7e\\u57ce\\u5e02\"},a.getFieldDecorator(\"city\",{rules:[{required:!0,message:\"\\u8bf7\\u9009\\u62e9\\u9001\\u7b7e\\u57ce\\u5e02\\uff01\"}]})(O.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\",style:{width:\"100%\"}},s))),O.a.createElement(K,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u8bc1\\u4ef6\\u53f7\\u7801\"},a.getFieldDecorator(\"docNo\",{rules:[{required:!0,message:\"\\u8bf7\\u8f93\\u5165\\u8bc1\\u4ef6\\u53f7\\u7801\\uff01\"}]})(O.a.createElement(V[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\"}))),O.a.createElement(K,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u8054\\u7cfb\\u7535\\u8bdd\"},a.getFieldDecorator(\"phone\",{rules:[{required:!0,message:\"\\u8bf7\\u8f93\\u5165\\u8054\\u7cfb\\u7535\\u8bdd\\uff01\"}]})(O.a.createElement(V[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\"}))))}),U=(l=Object(N[\"connect\"])(function(e){var t=e.visaList,a=e.loading;return{visaList:t,loading:a.models.visaList}}),r=M[\"a\"].create(),l(n=r((i=function(e){function t(){var e,a;b()(this,t);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return a=F()(this,(e=L()(t)).call.apply(e,[this].concat(r))),a.state={modalVisible:!1,expandForm:!1,selectedRows:[],formValues:{}},a.handleStandardTableChange=function(e,t,l){var r=a.props.dispatch,n=a.state.formValues,i=Object.keys(t).reduce(function(e,a){var l=f()({},e);return l[a]=Q(t[a]),l},{}),s=f()({pageNum:e.current,pageSize:e.pageSize},n,i);l.field&&(s.orderBy=\"\".concat(l.field,\" \").concat(\"descend\"===l.order?\"desc\":\"asc\")),r({type:\"visaList/fetch\",payload:s})},a.previewItem=function(e){window.open(\"/visa/applform/\".concat(e))},a.handleFormReset=function(){var e=a.props,t=e.form,l=e.dispatch;t.resetFields(),a.setState({formValues:{}}),l({type:\"visaList/fetch\",payload:{}})},a.toggleForm=function(){var e=a.state.expandForm;a.setState({expandForm:!e})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleSearch=function(e){e.preventDefault();var t=a.props,l=t.dispatch,r=t.form;r.validateFields(function(e,t){if(!e){var r=f()({},t,{createdAt:t.createdAt&&t.createdAt.format(\"YYYY-MM-DD\")});a.setState({formValues:r}),l({type:\"visaList/fetch\",payload:r})}})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e})},a.handleUpdateModalVisible=function(e,t){window.open(\"/visa/applform/\".concat(t.id))},a.handleAdd=function(e){var t=a.props.dispatch;t({type:\"visaList/add\",payload:f()({},e)}),a.handleModalVisible()},a}return S()(t,e),w()(t,[{key:\"componentDidMount\",value:function(){var e=this.props,t=e.dispatch,a=e.location.query;Object(z[\"d\"])(a.token),t({type:\"visaList/init\"}),t({type:\"visaList/fetch\",payload:{pageNum:1,pageSize:10}})}},{key:\"renderSimpleForm\",value:function(e){var t=e.countryItems,a=e.typeItems,l=this.props.form.getFieldDecorator;return O.a.createElement(M[\"a\"],{onSubmit:this.handleSearch,layout:\"inline\"},O.a.createElement(p[\"a\"],{gutter:{md:8,lg:24,xl:48}},O.a.createElement(v[\"a\"],{md:8,sm:24},O.a.createElement(K,{label:\"\\u7533\\u8bf7\\u56fd\\u5bb6\"},l(\"country\")(O.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"}},t)))),O.a.createElement(v[\"a\"],{md:8,sm:24},O.a.createElement(K,{label:\"\\u7c7b\\u578b\"},l(\"type\")(O.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"}},a)))),O.a.createElement(v[\"a\"],{md:8,sm:24},O.a.createElement(\"span\",{className:T.a.submitButtons},O.a.createElement(h[\"a\"],{type:\"primary\",htmlType:\"submit\"},\"\\u67e5\\u8be2\"),O.a.createElement(h[\"a\"],{style:{marginLeft:8},onClick:this.handleFormReset},\"\\u91cd\\u7f6e\"),O.a.createElement(\"a\",{style:{marginLeft:8},onClick:this.toggleForm},\"\\u5c55\\u5f00 \",O.a.createElement(u[\"a\"],{type:\"down\"}))))))}},{key:\"renderAdvancedForm\",value:function(e){var t=e.countryItems,a=e.presentCityItems,l=e.typeItems,r=e.statusItems,n=this.props.form.getFieldDecorator;return O.a.createElement(M[\"a\"],{onSubmit:this.handleSearch,layout:\"inline\"},O.a.createElement(p[\"a\"],{gutter:{md:8,lg:24,xl:48}},O.a.createElement(v[\"a\"],{md:8,sm:24},O.a.createElement(K,{label:\"\\u7533\\u8bf7\\u56fd\\u5bb6\"},n(\"country\")(O.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"}},t)))),O.a.createElement(v[\"a\"],{md:8,sm:24},O.a.createElement(K,{label:\"\\u7c7b\\u578b\"},n(\"type\")(O.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"}},l)))),O.a.createElement(v[\"a\"],{md:8,sm:24},O.a.createElement(K,{label:\"\\u72b6\\u6001\"},n(\"Status\")(O.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"}},r))))),O.a.createElement(p[\"a\"],{gutter:{md:8,lg:24,xl:48}},O.a.createElement(v[\"a\"],{md:8,sm:24},O.a.createElement(K,{label:\"\\u7533\\u8bf7\\u4eba\"},n(\"applicant\")(O.a.createElement(V[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\",style:{width:\"100%\"}})))),O.a.createElement(v[\"a\"],{md:8,sm:24},O.a.createElement(K,{label:\"\\u9001\\u7b7e\\u57ce\\u5e02\"},n(\"city\")(O.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"}},a)))),O.a.createElement(v[\"a\"],{md:8,sm:24},O.a.createElement(K,{label:\"\\u521b\\u5efa\\u65e5\\u671f\"},n(\"createdAt\")(O.a.createElement(m[\"a\"],{style:{width:\"100%\"},placeholder:\"\\u8bf7\\u8f93\\u5165\\u521b\\u5efa\\u65e5\\u671f\"}))))),O.a.createElement(\"div\",{style:{overflow:\"hidden\"}},O.a.createElement(\"div\",{style:{marginBottom:24}},O.a.createElement(h[\"a\"],{type:\"primary\",htmlType:\"submit\"},\"\\u67e5\\u8be2\"),O.a.createElement(h[\"a\"],{style:{marginLeft:8},onClick:this.handleFormReset},\"\\u91cd\\u7f6e\"),O.a.createElement(\"a\",{style:{marginLeft:8},onClick:this.toggleForm},\"\\u6536\\u8d77 \",O.a.createElement(u[\"a\"],{type:\"up\"})))))}},{key:\"renderForm\",value:function(e){var t=this.state.expandForm;return t?this.renderAdvancedForm(e):this.renderSimpleForm(e)}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.visaList,l=a.visaList,r=a.initInfo,n=a.pagination,i=t.loading,s={list:l,pagination:n},m=r.countries,p=r.presentCities,u=r.types,v=r.statusOpts,y={};if(m)for(var f=0;f<m.length;f+=1){var E=m[f];y[E.value]=E.label}var b={};if(u)for(var g=0;g<u.length;g+=1){var w=u[g];b[w.value]=w.label}var C={};if(p)for(var F=0;F<p.length;F+=1){var I=p[F];C[I.value]=I.label}var L=[];m&&(L=m.map(function(e){return O.a.createElement(P,{key:e.value,value:e.value},e.label)}));var k=[];p&&(k=p.map(function(e){return O.a.createElement(P,{key:e.value,value:e.value},e.label)}));var S=[];u&&(S=u.map(function(e){return O.a.createElement(P,{key:e.value,value:e.value},e.label)}));var x=[];v&&(x=v.map(function(e){return O.a.createElement(P,{key:e.value,value:e.value},e.label)}));var V={countryItems:L,presentCityItems:k,typeItems:S,statusItems:x},D=this.state,M=D.selectedRows,N=D.modalVisible,R={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible},B=[{title:\"\\u8ba2\\u5355\\u7f16\\u53f7\",dataIndex:\"appOrderNo\",render:function(t,a){return O.a.createElement(\"a\",{onClick:function(){return e.previewItem(a.id)}},t)}},{title:\"\\u7533\\u8bf7\\u4eba\",dataIndex:\"applicant\",render:function(e){return e}},{title:\"\\u56fd\\u5bb6\",dataIndex:\"country\",sorter:!0,render:function(e){return y[e]?y[e]:e}},{title:\"\\u7c7b\\u578b\",dataIndex:\"type\",sorter:!0,render:function(e){return b[e]?b[e]:e}},{title:\"\\u624b\\u673a\\u53f7\",dataIndex:\"phone\"},{title:\"\\u62a4\\u7167\\u53f7\",dataIndex:\"docNo\"},{title:\"\\u9001\\u7b7e\\u57ce\\u5e02\",dataIndex:\"city\",sorter:!0,render:function(e){return C[e]?C[e]:e}},{title:\"\\u521b\\u5efa\\u65f6\\u95f4\",dataIndex:\"createdAt\",sorter:!0,render:function(e){return O.a.createElement(\"span\",null,q()(e).format(\"YYYY-MM-DD HH:mm:ss\"))}},{title:\"\\u72b6\\u6001\",dataIndex:\"status\",render:function(e){return O.a.createElement(d[\"a\"],{status:X[e],text:H[e]})}},{title:\"\\u64cd\\u4f5c\",render:function(t,a){return O.a.createElement(A[\"Fragment\"],null,O.a.createElement(\"a\",{onClick:function(){return e.handleUpdateModalVisible(!0,a)}},\"\\u4fee\\u6539\"))}}];return O.a.createElement(\"div\",null,O.a.createElement(j[\"a\"],{title:\"\\u7b7e\\u8bc1\\u4fe1\\u606f\\u7ba1\\u7406\"}),O.a.createElement(c[\"a\"],{bordered:!1},O.a.createElement(\"div\",{className:T.a.tableList},O.a.createElement(\"div\",{className:T.a.tableListForm},this.renderForm(V)),O.a.createElement(\"div\",{className:T.a.tableListOperator},O.a.createElement(h[\"a\"],{icon:\"plus\",type:\"primary\",onClick:function(){return e.handleModalVisible(!0)}},\"\\u65b0\\u5efa\"),M.length>0&&O.a.createElement(\"span\",null,O.a.createElement(h[\"a\"],null,\"\\u5220\\u9664\"))),O.a.createElement(Y[\"a\"],{rowKey:\"id\",selectedRows:M,loading:i,data:s,columns:B,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),O.a.createElement(J,o()({},R,{modalVisible:N,initInfo:V})))}}]),t}(A[\"PureComponent\"]),n=i))||n)||n);t[\"default\"]=U}}]);","extractedComments":[]}