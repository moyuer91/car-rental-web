{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[41],{XvAv:function(e,a,t){e.exports={tableList:\"antd-pro-pages-visa-visa-list-tableList\",tableListOperator:\"antd-pro-pages-visa-visa-list-tableListOperator\",tableListForm:\"antd-pro-pages-visa-visa-list-tableListForm\",submitButtons:\"antd-pro-pages-visa-visa-list-submitButtons\"}},Yx7n:function(e,a,t){\"use strict\";t.r(a);var l,r,n,s,i=t(\"jehZ\"),o=t.n(i),c=(t(\"IzEo\"),t(\"bx4M\")),d=(t(\"Awhp\"),t(\"KrTs\")),m=(t(\"iQDF\"),t(\"+eQT\")),p=(t(\"14J3\"),t(\"BMrR\")),u=(t(\"Pwec\"),t(\"CtXQ\")),h=(t(\"+L6B\"),t(\"2/Rp\")),v=(t(\"jCWc\"),t(\"kPKH\")),y=(t(\"miYZ\"),t(\"tsqr\")),f=t(\"p0pE\"),E=t.n(f),b=t(\"2Taf\"),g=t.n(b),w=t(\"vZ4D\"),C=t.n(w),F=t(\"l4Ni\"),I=t.n(F),L=t(\"ujKo\"),k=t.n(L),S=t(\"MhPg\"),V=t.n(S),x=(t(\"2qtc\"),t(\"kLXV\")),M=(t(\"5NDa\"),t(\"5rEg\")),D=(t(\"OaEy\"),t(\"2fM7\")),O=(t(\"y8nQ\"),t(\"Vl3Y\")),A=t(\"q1tI\"),R=t.n(A),q=t(\"MuoO\"),N=t(\"wd/R\"),j=t.n(N),T=t(\"usdK\"),Y=t(\"CkN6\"),B=t(\"LIIa\"),K=t(\"XvAv\"),z=t.n(K),P=t(\"34ay\"),Q=O[\"a\"].Item,U=D[\"a\"].Option,X=function(e){return Object.keys(e).map(function(a){return e[a]}).join(\",\")},H=[\"default\",\"processing\",\"success\",\"error\"],J=[\"\\u8349\\u7a3f\",\"\\u5904\\u7406\\u4e2d\",\"\\u5df2\\u5b8c\\u6210\",\"\\u5f02\\u5e38\"],Z=O[\"a\"].create()(function(e){var a=e.modalVisible,t=e.form,l=e.handleAdd,r=e.handleModalVisible,n=e.initInfo,s=n.countryItems,i=n.presentCityItems,o=n.typeItems,c=function(){t.validateFields(function(e,a){e||(t.resetFields(),l(a))})};return R.a.createElement(x[\"a\"],{destroyOnClose:!0,title:\"\\u65b0\\u5efa\\u7b7e\\u8bc1\\u7533\\u8bf7\",visible:a,onOk:c,onCancel:function(){return r()}},R.a.createElement(Q,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u8ba2\\u5355\\u7f16\\u53f7\"},t.getFieldDecorator(\"appOrderNo\",{rules:[{required:!0,message:\"\\u8bf7\\u8f93\\u5165\\u8ba2\\u5355\\u7f16\\u53f7\\uff01\"}]})(R.a.createElement(M[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\"}))),R.a.createElement(Q,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u7533\\u8bf7\\u4eba\"},t.getFieldDecorator(\"applicant\",{rules:[{required:!0,message:\"\\u8bf7\\u8f93\\u5165\\u7533\\u8bf7\\u4eba\\u59d3\\u540d\\uff01\"}]})(R.a.createElement(M[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\"}))),R.a.createElement(Q,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u7533\\u8bf7\\u56fd\\u5bb6\"},t.getFieldDecorator(\"country\",{rules:[{required:!0,message:\"\\u8bf7\\u9009\\u62e9\\u7533\\u8bf7\\u56fd\\u5bb6\\uff01\"}]})(R.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\",style:{width:\"100%\"}},s))),R.a.createElement(Q,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u7b7e\\u8bc1\\u7c7b\\u578b\"},t.getFieldDecorator(\"type\",{rules:[{required:!0,message:\"\\u8bf7\\u9009\\u62e9\\u7b7e\\u8bc1\\u7c7b\\u578b\\uff01\"}]})(R.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\",style:{width:\"100%\"}},o))),R.a.createElement(Q,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u9001\\u7b7e\\u57ce\\u5e02\"},t.getFieldDecorator(\"city\",{rules:[{required:!0,message:\"\\u8bf7\\u9009\\u62e9\\u9001\\u7b7e\\u57ce\\u5e02\\uff01\"}]})(R.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\",style:{width:\"100%\"}},i))),R.a.createElement(Q,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u8bc1\\u4ef6\\u53f7\\u7801\"},t.getFieldDecorator(\"docNo\",{rules:[{required:!0,message:\"\\u8bf7\\u8f93\\u5165\\u8bc1\\u4ef6\\u53f7\\u7801\\uff01\"}]})(R.a.createElement(M[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\"}))),R.a.createElement(Q,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u8054\\u7cfb\\u7535\\u8bdd\"},t.getFieldDecorator(\"phone\",{rules:[{required:!0,message:\"\\u8bf7\\u8f93\\u5165\\u8054\\u7cfb\\u7535\\u8bdd\\uff01\"}]})(R.a.createElement(M[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\"}))))}),W=(l=Object(q[\"connect\"])(function(e){var a=e.visaList,t=e.loading;return{visaList:a,loading:t.models.visaList}}),r=O[\"a\"].create(),l(n=r((s=function(e){function a(){var e,t;g()(this,a);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return t=I()(this,(e=k()(a)).call.apply(e,[this].concat(r))),t.state={modalVisible:!1,expandForm:!1,selectedRows:[],formValues:{}},t.handleStandardTableChange=function(e,a,l){var r=t.props.dispatch,n=t.state.formValues,s=Object.keys(a).reduce(function(e,t){var l=E()({},e);return l[t]=X(a[t]),l},{}),i=E()({pageNum:e.current,pageSize:e.pageSize},n,s);l.field&&(i.sorter=\"\".concat(l.field,\"_\").concat(l.order)),r({type:\"visaList/fetch\",payload:i})},t.previewItem=function(e){T[\"a\"].push(\"/visa/applform/\".concat(e))},t.handleFormReset=function(){var e=t.props,a=e.form,l=e.dispatch;a.resetFields(),t.setState({formValues:{}}),l({type:\"visaList/fetch\",payload:{}})},t.toggleForm=function(){var e=t.state.expandForm;t.setState({expandForm:!e})},t.handleSelectRows=function(e){t.setState({selectedRows:e})},t.handleSearch=function(e){e.preventDefault();var a=t.props,l=a.dispatch,r=a.form;r.validateFields(function(e,a){if(!e){var r=E()({},a,{updatedAt:a.updatedAt&&a.updatedAt.valueOf()});t.setState({formValues:r}),l({type:\"visaList/fetch\",payload:r})}})},t.handleModalVisible=function(e){t.setState({modalVisible:!!e})},t.handleUpdateModalVisible=function(e,a){T[\"a\"].push(\"/visa/applform/\".concat(a.id))},t.handleAdd=function(e){var a=t.props.dispatch;a({type:\"visaList/add\",payload:E()({},e)}),t.handleModalVisible()},t.handleUpdate=function(e){var a=t.props.dispatch,l=t.state.formValues;a({type:\"visaList/update\",payload:{query:l,body:{name:e.name,desc:e.desc,key:e.key}}}),y[\"a\"].success(\"\\u914d\\u7f6e\\u6210\\u529f\"),t.handleUpdateModalVisible()},t}return V()(a,e),C()(a,[{key:\"componentDidMount\",value:function(){var e=this.props,a=e.dispatch,t=e.location.query;Object(P[\"d\"])(t.token),a({type:\"visaList/init\"}),a({type:\"visaList/fetch\",payload:{pageNum:1,pageSize:10}})}},{key:\"renderSimpleForm\",value:function(e){var a=e.countryItems,t=e.typeItems,l=this.props.form.getFieldDecorator;return R.a.createElement(O[\"a\"],{onSubmit:this.handleSearch,layout:\"inline\"},R.a.createElement(p[\"a\"],{gutter:{md:8,lg:24,xl:48}},R.a.createElement(v[\"a\"],{md:8,sm:24},R.a.createElement(Q,{label:\"\\u7533\\u8bf7\\u56fd\\u5bb6\"},l(\"country\")(R.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"}},a)))),R.a.createElement(v[\"a\"],{md:8,sm:24},R.a.createElement(Q,{label:\"\\u7b7e\\u8bc1\\u7c7b\\u578b\"},l(\"type\")(R.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"}},t)))),R.a.createElement(v[\"a\"],{md:8,sm:24},R.a.createElement(\"span\",{className:z.a.submitButtons},R.a.createElement(h[\"a\"],{type:\"primary\",htmlType:\"submit\"},\"\\u67e5\\u8be2\"),R.a.createElement(h[\"a\"],{style:{marginLeft:8},onClick:this.handleFormReset},\"\\u91cd\\u7f6e\"),R.a.createElement(\"a\",{style:{marginLeft:8},onClick:this.toggleForm},\"\\u5c55\\u5f00 \",R.a.createElement(u[\"a\"],{type:\"down\"}))))))}},{key:\"renderAdvancedForm\",value:function(e){var a=e.countryItems,t=e.presentCityItems,l=e.typeItems,r=e.statusItems,n=this.props.form.getFieldDecorator;return R.a.createElement(O[\"a\"],{onSubmit:this.handleSearch,layout:\"inline\"},R.a.createElement(p[\"a\"],{gutter:{md:8,lg:24,xl:48}},R.a.createElement(v[\"a\"],{md:8,sm:24},R.a.createElement(Q,{label:\"\\u7533\\u8bf7\\u56fd\\u5bb6\"},n(\"country\")(R.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"}},a)))),R.a.createElement(v[\"a\"],{md:8,sm:24},R.a.createElement(Q,{label:\"\\u7b7e\\u8bc1\\u7c7b\\u578b\"},n(\"type\")(R.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"}},l)))),R.a.createElement(v[\"a\"],{md:8,sm:24},R.a.createElement(Q,{label:\"\\u72b6\\u6001\"},n(\"Status\")(R.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"}},r))))),R.a.createElement(p[\"a\"],{gutter:{md:8,lg:24,xl:48}},R.a.createElement(v[\"a\"],{md:8,sm:24},R.a.createElement(Q,{label:\"\\u7533\\u8bf7\\u4eba\"},n(\"applicant\")(R.a.createElement(M[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\",style:{width:\"100%\"}})))),R.a.createElement(v[\"a\"],{md:8,sm:24},R.a.createElement(Q,{label:\"\\u9001\\u7b7e\\u57ce\\u5e02\"},n(\"presentCity\")(R.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"}},t)))),R.a.createElement(v[\"a\"],{md:8,sm:24},R.a.createElement(Q,{label:\"\\u521b\\u5efa\\u65e5\\u671f\"},n(\"date\")(R.a.createElement(m[\"a\"],{style:{width:\"100%\"},placeholder:\"\\u8bf7\\u8f93\\u5165\\u521b\\u5efa\\u65e5\\u671f\"}))))),R.a.createElement(\"div\",{style:{overflow:\"hidden\"}},R.a.createElement(\"div\",{style:{marginBottom:24}},R.a.createElement(h[\"a\"],{type:\"primary\",htmlType:\"submit\"},\"\\u67e5\\u8be2\"),R.a.createElement(h[\"a\"],{style:{marginLeft:8},onClick:this.handleFormReset},\"\\u91cd\\u7f6e\"),R.a.createElement(\"a\",{style:{marginLeft:8},onClick:this.toggleForm},\"\\u6536\\u8d77 \",R.a.createElement(u[\"a\"],{type:\"up\"})))))}},{key:\"renderForm\",value:function(e){var a=this.state.expandForm;return a?this.renderAdvancedForm(e):this.renderSimpleForm(e)}},{key:\"render\",value:function(){var e=this,a=this.props,t=a.visaList,l=t.visaList,r=t.initInfo,n=t.pagination,s=a.loading,i={list:l,pagination:n},m=r.countries,p=r.presentCities,u=r.types,v=r.statusOpts,y={};if(m)for(var f=0;f<m.length;f+=1){var E=m[f];y[E.value]=E.label}var b={};if(u)for(var g=0;g<u.length;g+=1){var w=u[g];b[w.value]=w.label}var C={};if(p)for(var F=0;F<p.length;F+=1){var I=p[F];C[I.value]=I.label}var L=[];m&&(L=m.map(function(e){return R.a.createElement(U,{key:e.value,value:e.value},e.label)}));var k=[];p&&(k=p.map(function(e){return R.a.createElement(U,{key:e.value,value:e.value},e.label)}));var S=[];u&&(S=u.map(function(e){return R.a.createElement(U,{key:e.value,value:e.value},e.label)}));var V=[];v&&(V=v.map(function(e){return R.a.createElement(U,{key:e.value,value:e.value},e.label)}));var x={countryItems:L,presentCityItems:k,typeItems:S,statusItems:V},M=this.state,D=M.selectedRows,O=M.modalVisible,q={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible},N=[{title:\"\\u8ba2\\u5355\\u7f16\\u53f7\",dataIndex:\"appOrderNo\",render:function(a,t){return R.a.createElement(\"a\",{onClick:function(){return e.previewItem(t.id)}},a)}},{title:\"\\u7533\\u8bf7\\u4eba\",dataIndex:\"applicant\",render:function(e){return e}},{title:\"\\u56fd\\u5bb6\",dataIndex:\"country\",sorter:!0,render:function(e){return y[e]?y[e]:e}},{title:\"\\u7b7e\\u8bc1\\u7c7b\\u578b\",dataIndex:\"type\",sorter:!0,render:function(e){return b[e]?b[e]:e}},{title:\"\\u9001\\u7b7e\\u57ce\\u5e02\",dataIndex:\"city\",sorter:!0,render:function(e){return C[e]?C[e]:e}},{title:\"\\u521b\\u5efa\\u65f6\\u95f4\",dataIndex:\"createdAt\",sorter:!0,render:function(e){return R.a.createElement(\"span\",null,j()(e).format(\"YYYY-MM-DD HH:mm:ss\"))}},{title:\"\\u72b6\\u6001\",dataIndex:\"status\",render:function(e){return R.a.createElement(d[\"a\"],{status:H[e],text:J[e]})}},{title:\"\\u64cd\\u4f5c\",render:function(a,t){return R.a.createElement(A[\"Fragment\"],null,R.a.createElement(\"a\",{onClick:function(){return e.handleUpdateModalVisible(!0,t)}},\"\\u4fee\\u6539\"))}}];return R.a.createElement(\"div\",null,R.a.createElement(B[\"a\"],{title:\"\\u7b7e\\u8bc1\\u4fe1\\u606f\\u7ba1\\u7406\"}),R.a.createElement(c[\"a\"],{bordered:!1},R.a.createElement(\"div\",{className:z.a.tableList},R.a.createElement(\"div\",{className:z.a.tableListForm},this.renderForm(x)),R.a.createElement(\"div\",{className:z.a.tableListOperator},R.a.createElement(h[\"a\"],{icon:\"plus\",type:\"primary\",onClick:function(){return e.handleModalVisible(!0)}},\"\\u65b0\\u5efa\"),D.length>0&&R.a.createElement(\"span\",null,R.a.createElement(h[\"a\"],null,\"\\u5220\\u9664\"))),R.a.createElement(Y[\"a\"],{rowKey:\"id\",selectedRows:D,loading:s,data:i,columns:N,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),R.a.createElement(Z,o()({},q,{modalVisible:O,initInfo:x})))}}]),a}(A[\"PureComponent\"]),n=s))||n)||n);a[\"default\"]=W}}]);","extractedComments":[]}