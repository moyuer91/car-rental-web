{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[41],{XvAv:function(e,t,a){e.exports={tableList:\"antd-pro-pages-visa-visa-list-tableList\",tableListOperator:\"antd-pro-pages-visa-visa-list-tableListOperator\",tableListForm:\"antd-pro-pages-visa-visa-list-tableListForm\",submitButtons:\"antd-pro-pages-visa-visa-list-submitButtons\"}},Yx7n:function(e,t,a){\"use strict\";a.r(t);var r,l,n,i,s=a(\"jehZ\"),o=a.n(s),c=(a(\"IzEo\"),a(\"bx4M\")),d=(a(\"Awhp\"),a(\"KrTs\")),m=(a(\"iQDF\"),a(\"+eQT\")),p=(a(\"14J3\"),a(\"BMrR\")),u=(a(\"Pwec\"),a(\"CtXQ\")),h=(a(\"+L6B\"),a(\"2/Rp\")),v=(a(\"jCWc\"),a(\"kPKH\")),f=a(\"p0pE\"),y=a.n(f),E=a(\"2Taf\"),b=a.n(E),g=a(\"vZ4D\"),w=a.n(g),F=a(\"l4Ni\"),C=a.n(F),I=a(\"ujKo\"),L=a.n(I),k=a(\"MhPg\"),S=a.n(k),x=(a(\"2qtc\"),a(\"kLXV\")),V=(a(\"5NDa\"),a(\"5rEg\")),M=(a(\"OaEy\"),a(\"2fM7\")),D=(a(\"y8nQ\"),a(\"Vl3Y\")),O=a(\"q1tI\"),A=a.n(O),R=a(\"MuoO\"),N=a(\"wd/R\"),Y=a.n(N),q=a(\"CkN6\"),j=a(\"LIIa\"),B=a(\"XvAv\"),T=a.n(B),z=a(\"34ay\"),K=D[\"a\"].Item,P=M[\"a\"].Option,Q=function(e){return Object.keys(e).map(function(t){return e[t]}).join(\",\")},X=[\"default\",\"processing\",\"success\",\"error\"],H=[\"\\u8349\\u7a3f\",\"\\u5904\\u7406\\u4e2d\",\"\\u5df2\\u5b8c\\u6210\",\"\\u5f02\\u5e38\"],J=D[\"a\"].create()(function(e){var t=e.modalVisible,a=e.form,r=e.handleAdd,l=e.handleModalVisible,n=e.initInfo,i=n.countryItems,s=n.presentCityItems,o=n.typeItems,c=function(){a.validateFields(function(e,t){e||(a.resetFields(),r(t))})};return A.a.createElement(x[\"a\"],{destroyOnClose:!0,title:\"\\u65b0\\u5efa\\u7b7e\\u8bc1\\u7533\\u8bf7\",visible:t,onOk:c,onCancel:function(){return l()}},A.a.createElement(K,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u7533\\u8bf7\\u4eba\"},a.getFieldDecorator(\"applicant\",{rules:[{required:!0,message:\"\\u8bf7\\u8f93\\u5165\\u7533\\u8bf7\\u4eba\\u59d3\\u540d\\uff01\"}]})(A.a.createElement(V[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\"}))),A.a.createElement(K,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u7533\\u8bf7\\u56fd\\u5bb6\"},a.getFieldDecorator(\"country\",{rules:[{required:!0,message:\"\\u8bf7\\u9009\\u62e9\\u7533\\u8bf7\\u56fd\\u5bb6\\uff01\"}]})(A.a.createElement(M[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\",style:{width:\"100%\"}},i))),A.a.createElement(K,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u7b7e\\u8bc1\\u7c7b\\u578b\"},a.getFieldDecorator(\"type\",{rules:[{required:!0,message:\"\\u8bf7\\u9009\\u62e9\\u7b7e\\u8bc1\\u7c7b\\u578b\\uff01\"}]})(A.a.createElement(M[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\",style:{width:\"100%\"}},o))),A.a.createElement(K,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u9001\\u7b7e\\u57ce\\u5e02\"},a.getFieldDecorator(\"city\",{rules:[{required:!0,message:\"\\u8bf7\\u9009\\u62e9\\u9001\\u7b7e\\u57ce\\u5e02\\uff01\"}]})(A.a.createElement(M[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\",style:{width:\"100%\"}},s))),A.a.createElement(K,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u8bc1\\u4ef6\\u53f7\\u7801\"},a.getFieldDecorator(\"docNo\",{rules:[{required:!0,message:\"\\u8bf7\\u8f93\\u5165\\u8bc1\\u4ef6\\u53f7\\u7801\\uff01\"}]})(A.a.createElement(V[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\"}))),A.a.createElement(K,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u8054\\u7cfb\\u7535\\u8bdd\"},a.getFieldDecorator(\"phone\",{rules:[{required:!0,message:\"\\u8bf7\\u8f93\\u5165\\u8054\\u7cfb\\u7535\\u8bdd\\uff01\"}]})(A.a.createElement(V[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\"}))))}),U=(r=Object(R[\"connect\"])(function(e){var t=e.visaList,a=e.loading;return{visaList:t,loading:a.models.visaList}}),l=D[\"a\"].create(),r(n=l((i=function(e){function t(){var e,a;b()(this,t);for(var r=arguments.length,l=new Array(r),n=0;n<r;n++)l[n]=arguments[n];return a=C()(this,(e=L()(t)).call.apply(e,[this].concat(l))),a.state={modalVisible:!1,expandForm:!1,selectedRows:[],formValues:{}},a.handleStandardTableChange=function(e,t,r){var l=a.props.dispatch,n=a.state.formValues,i=Object.keys(t).reduce(function(e,a){var r=y()({},e);return r[a]=Q(t[a]),r},{}),s=y()({pageNum:e.current,pageSize:e.pageSize},n,i);r.field&&(s.orderBy=\"\".concat(r.field,\" \").concat(\"descend\"===r.order?\"desc\":\"asc\")),l({type:\"visaList/fetch\",payload:s})},a.previewItem=function(e){window.open(\"/visa/applform/\".concat(e))},a.handleFormReset=function(){var e=a.props,t=e.form,r=e.dispatch;t.resetFields(),a.setState({formValues:{}}),r({type:\"visaList/fetch\",payload:{}})},a.toggleForm=function(){var e=a.state.expandForm;a.setState({expandForm:!e})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleSearch=function(e){e.preventDefault();var t=a.props,r=t.dispatch,l=t.form;l.validateFields(function(e,t){if(!e){var l=y()({},t,{createdAt:t.createdAt&&t.createdAt.format(\"YYYY-MM-DD\")});a.setState({formValues:l}),r({type:\"visaList/fetch\",payload:l})}})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e})},a.handleUpdateModalVisible=function(e,t){window.open(\"/visa/applform/\".concat(t.id))},a.handleAdd=function(e){var t=a.props.dispatch;t({type:\"visaList/add\",payload:y()({},e)}),a.handleModalVisible()},a}return S()(t,e),w()(t,[{key:\"componentDidMount\",value:function(){var e=this.props,t=e.dispatch,a=e.location.query;Object(z[\"d\"])(a.token),t({type:\"visaList/init\"}),t({type:\"visaList/fetch\",payload:{pageNum:1,pageSize:10}})}},{key:\"renderSimpleForm\",value:function(e){var t=e.countryItems,a=e.typeItems,r=this.props.form.getFieldDecorator;return A.a.createElement(D[\"a\"],{onSubmit:this.handleSearch,layout:\"inline\"},A.a.createElement(p[\"a\"],{gutter:{md:8,lg:24,xl:48}},A.a.createElement(v[\"a\"],{md:8,sm:24},A.a.createElement(K,{label:\"\\u7533\\u8bf7\\u56fd\\u5bb6\"},r(\"country\")(A.a.createElement(M[\"a\"],{showSearch:!0,placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"},filterOption:function(e,t){return t.props.children.indexOf(e)>=0}},t)))),A.a.createElement(v[\"a\"],{md:8,sm:24},A.a.createElement(K,{label:\"\\u7c7b\\u578b\"},r(\"type\")(A.a.createElement(M[\"a\"],{placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"}},a)))),A.a.createElement(v[\"a\"],{md:8,sm:24},A.a.createElement(\"span\",{className:T.a.submitButtons},A.a.createElement(h[\"a\"],{type:\"primary\",htmlType:\"submit\"},\"\\u67e5\\u8be2\"),A.a.createElement(h[\"a\"],{style:{marginLeft:8},onClick:this.handleFormReset},\"\\u91cd\\u7f6e\"),A.a.createElement(\"a\",{style:{marginLeft:8},onClick:this.toggleForm},\"\\u5c55\\u5f00 \",A.a.createElement(u[\"a\"],{type:\"down\"}))))))}},{key:\"renderAdvancedForm\",value:function(e){var t=e.countryItems,a=e.presentCityItems,r=e.typeItems,l=e.statusItems,n=this.props.form.getFieldDecorator;return A.a.createElement(D[\"a\"],{onSubmit:this.handleSearch,layout:\"inline\"},A.a.createElement(p[\"a\"],{gutter:{md:8,lg:24,xl:48}},A.a.createElement(v[\"a\"],{md:8,sm:24},A.a.createElement(K,{label:\"\\u7533\\u8bf7\\u56fd\\u5bb6\"},n(\"country\")(A.a.createElement(M[\"a\"],{showSearch:!0,placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"},filterOption:function(e,t){return t.props.children.indexOf(e)>=0}},t)))),A.a.createElement(v[\"a\"],{md:8,sm:24},A.a.createElement(K,{label:\"\\u7c7b\\u578b\"},n(\"type\")(A.a.createElement(M[\"a\"],{placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"}},r)))),A.a.createElement(v[\"a\"],{md:8,sm:24},A.a.createElement(K,{label:\"\\u72b6\\u6001\"},n(\"Status\")(A.a.createElement(M[\"a\"],{placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"}},l))))),A.a.createElement(p[\"a\"],{gutter:{md:8,lg:24,xl:48}},A.a.createElement(v[\"a\"],{md:8,sm:24},A.a.createElement(K,{label:\"\\u7533\\u8bf7\\u4eba\"},n(\"applicant\")(A.a.createElement(V[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\",style:{width:\"100%\"}})))),A.a.createElement(v[\"a\"],{md:8,sm:24},A.a.createElement(K,{label:\"\\u9001\\u7b7e\\u57ce\\u5e02\"},n(\"city\")(A.a.createElement(M[\"a\"],{placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"}},a)))),A.a.createElement(v[\"a\"],{md:8,sm:24},A.a.createElement(K,{label:\"\\u521b\\u5efa\\u65e5\\u671f\"},n(\"createdAt\")(A.a.createElement(m[\"a\"],{style:{width:\"100%\"},placeholder:\"\\u8bf7\\u8f93\\u5165\\u521b\\u5efa\\u65e5\\u671f\"}))))),A.a.createElement(\"div\",{style:{overflow:\"hidden\"}},A.a.createElement(\"div\",{style:{marginBottom:24}},A.a.createElement(h[\"a\"],{type:\"primary\",htmlType:\"submit\"},\"\\u67e5\\u8be2\"),A.a.createElement(h[\"a\"],{style:{marginLeft:8},onClick:this.handleFormReset},\"\\u91cd\\u7f6e\"),A.a.createElement(\"a\",{style:{marginLeft:8},onClick:this.toggleForm},\"\\u6536\\u8d77 \",A.a.createElement(u[\"a\"],{type:\"up\"})))))}},{key:\"renderForm\",value:function(e){var t=this.state.expandForm;return t?this.renderAdvancedForm(e):this.renderSimpleForm(e)}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.visaList,r=a.visaList,l=a.initInfo,n=a.pagination,i=t.loading,s={list:r,pagination:n},m=l.countries,p=l.presentCities,u=l.types,v=l.statusOpts,f={};if(m)for(var y=0;y<m.length;y+=1){var E=m[y];f[E.value]=E.label}var b={};if(u)for(var g=0;g<u.length;g+=1){var w=u[g];b[w.value]=w.label}var F={};if(p)for(var C=0;C<p.length;C+=1){var I=p[C];F[I.value]=I.label}var L=[];m&&(L=m.map(function(e){return A.a.createElement(P,{key:e.value,value:e.value},e.label)}));var k=[];p&&(k=p.map(function(e){return A.a.createElement(P,{key:e.value,value:e.value},e.label)}));var S=[];u&&(S=u.map(function(e){return A.a.createElement(P,{key:e.value,value:e.value},e.label)}));var x=[];v&&(x=v.map(function(e){return A.a.createElement(P,{key:e.value,value:e.value},e.label)}));var V={countryItems:L,presentCityItems:k,typeItems:S,statusItems:x},M=this.state,D=M.selectedRows,R=M.modalVisible,N={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible},B=[{title:\"\\u7f16\\u53f7\",dataIndex:\"id\",render:function(t,a){return A.a.createElement(\"a\",{onClick:function(){return e.previewItem(a.id)}},t)}},{title:\"\\u7533\\u8bf7\\u4eba\",dataIndex:\"applicant\",render:function(e){return e}},{title:\"\\u56fd\\u5bb6\",dataIndex:\"country\",sorter:!0,render:function(e){return f[e]?f[e]:e}},{title:\"\\u7c7b\\u578b\",dataIndex:\"type\",sorter:!0,render:function(e){return b[e]?b[e]:e}},{title:\"\\u624b\\u673a\\u53f7\",dataIndex:\"phone\"},{title:\"\\u62a4\\u7167\\u53f7\",dataIndex:\"docNo\"},{title:\"\\u9001\\u7b7e\\u57ce\\u5e02\",dataIndex:\"city\",sorter:!0,render:function(e){return F[e]?F[e]:e}},{title:\"\\u521b\\u5efa\\u65f6\\u95f4\",dataIndex:\"createdAt\",sorter:!0,render:function(e){return A.a.createElement(\"span\",null,Y()(e).format(\"YYYY-MM-DD HH:mm:ss\"))}},{title:\"\\u72b6\\u6001\",dataIndex:\"status\",render:function(e){return A.a.createElement(d[\"a\"],{status:X[e],text:H[e]})}},{title:\"\\u64cd\\u4f5c\",render:function(t,a){return A.a.createElement(O[\"Fragment\"],null,A.a.createElement(\"a\",{onClick:function(){return e.handleUpdateModalVisible(!0,a)}},\"\\u4fee\\u6539\"))}}];return A.a.createElement(\"div\",null,A.a.createElement(j[\"a\"],{title:\"\\u7b7e\\u8bc1\\u4fe1\\u606f\\u7ba1\\u7406\"}),A.a.createElement(c[\"a\"],{bordered:!1},A.a.createElement(\"div\",{className:T.a.tableList},A.a.createElement(\"div\",{className:T.a.tableListForm},this.renderForm(V)),A.a.createElement(\"div\",{className:T.a.tableListOperator},A.a.createElement(h[\"a\"],{icon:\"plus\",type:\"primary\",onClick:function(){return e.handleModalVisible(!0)}},\"\\u65b0\\u5efa\"),D.length>0&&A.a.createElement(\"span\",null,A.a.createElement(h[\"a\"],null,\"\\u5220\\u9664\"))),A.a.createElement(q[\"a\"],{rowKey:\"id\",selectedRows:D,loading:i,data:s,columns:B,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),A.a.createElement(J,o()({},N,{modalVisible:R,initInfo:V})))}}]),t}(O[\"PureComponent\"]),n=i))||n)||n);t[\"default\"]=U}}]);","extractedComments":[]}