{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[45],{\"p/du\":function(e,a,t){\"use strict\";t.r(a);var s=t(\"d6i3\"),r=t.n(s),n=t(\"p0pE\"),i=t.n(n),p=t(\"bmkC\"),c=t(\"QArB\"),u=t(\"SlhZ\");a[\"default\"]={namespace:\"visapage\",state:{pageName:\"\",descr:\"\",elements:[]},effects:{fetch:r.a.mark(function e(a,t){var s,n,l,o,f,d,g,m;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=a.payload,n=t.call,l=t.put,e.next=4,n(c[\"a\"],s);case 4:for(o=e.sent,f=Object(u[\"a\"])(o),d=f.elements,g=0;g<d.length;g+=1){m=d[g];try{m.rules=m.rules?JSON.parse(m.rules):\"\",m.options=m.options?JSON.parse(m.options):\"\",m.displayWhen=m.displayWhen?JSON.parse(m.displayWhen):\"\"}catch(e){p[\"message\"].error(e.toString())}}return e.next=10,l({type:\"getPage\",payload:i()({},f)});case 10:case\"end\":return e.stop()}},e)}),save:r.a.mark(function e(a,t){var s,n,i,l,o,f,d,g,m,y,h,v;return r.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return s=a.payload,n=a.callback,i=t.call,l=t.put,o=s.pageId,f=s.prjId,d=s.values,g=s.elementsMap,m=[],Object.keys(d).forEach(function(e){var a=d[e];if(g[e]&&d[e]){var t=g[e].type;if(20===t)a=JSON.stringify(d[e].tableData);else if(4===t)a=d[e].format(\"YYYY-MM-DD\");else if(5===t)a=d[e].format(\"HHmmss\");else if(8===t){var s=d[e].map(function(e){return e.format(\"YYYY-MM-DD\")});a=JSON.stringify(s)}else if(11===t)a=JSON.stringify(d[e]);else if(9===t)a=JSON.stringify(d[e]);else if(12===t){var r=d[e],n=r.map(function(e){return{uid:e.uid,name:e.name,status:e.status,url:e.url}});a=JSON.stringify(n)}else 13===t&&(a=JSON.stringify(d[e]))}m.push({pageElemId:e,value:a,storageId:g[e].storageId})}),e.next=7,i(c[\"d\"],{id:o,prjId:f,data:m});case 7:return y=e.sent,h=!0,v=!0,Object(u[\"b\"])(y)?p[\"message\"].success(\"\\u4fdd\\u5b58\\u6210\\u529f\"):(p[\"message\"].error(\"\\u4fdd\\u5b58\\u5931\\u8d25:\".concat(y.msg)),h=!1,v=!1),e.next=13,l({type:\"visaform/updateFinSts\",payload:{finished:h,pageId:o}});case 13:n&&n(v);case 14:case\"end\":return e.stop()}},e)})},reducers:{getPage:function(e,a){return i()({},e,a.payload)}}}}}]);","extractedComments":[]}