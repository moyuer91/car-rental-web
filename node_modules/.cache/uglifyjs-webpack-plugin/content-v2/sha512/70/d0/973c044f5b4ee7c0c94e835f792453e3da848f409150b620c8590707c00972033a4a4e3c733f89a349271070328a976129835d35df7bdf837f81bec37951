{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[41],{XvAv:function(e,t,a){e.exports={tableList:\"antd-pro-pages-visa-visa-list-tableList\",tableListOperator:\"antd-pro-pages-visa-visa-list-tableListOperator\",tableListForm:\"antd-pro-pages-visa-visa-list-tableListForm\",submitButtons:\"antd-pro-pages-visa-visa-list-submitButtons\"}},Yx7n:function(e,t,a){\"use strict\";a.r(t);var l,r,n,s,i=a(\"jehZ\"),o=a.n(i),c=(a(\"IzEo\"),a(\"bx4M\")),d=(a(\"Awhp\"),a(\"KrTs\")),m=(a(\"iQDF\"),a(\"+eQT\")),p=(a(\"14J3\"),a(\"BMrR\")),u=(a(\"Pwec\"),a(\"CtXQ\")),h=(a(\"+L6B\"),a(\"2/Rp\")),v=(a(\"jCWc\"),a(\"kPKH\")),y=(a(\"miYZ\"),a(\"tsqr\")),f=a(\"p0pE\"),E=a.n(f),b=a(\"2Taf\"),g=a.n(b),w=a(\"vZ4D\"),C=a.n(w),F=a(\"l4Ni\"),I=a.n(F),L=a(\"ujKo\"),k=a.n(L),V=a(\"MhPg\"),S=a.n(V),x=(a(\"2qtc\"),a(\"kLXV\")),M=(a(\"5NDa\"),a(\"5rEg\")),D=(a(\"OaEy\"),a(\"2fM7\")),O=(a(\"y8nQ\"),a(\"Vl3Y\")),A=a(\"q1tI\"),R=a.n(A),q=a(\"MuoO\"),N=a(\"wd/R\"),j=a.n(N),T=a(\"usdK\"),Y=a(\"CkN6\"),B=a(\"zHco\"),K=a(\"XvAv\"),P=a.n(K),z=O[\"a\"].Item,H=D[\"a\"].Option,Q=function(e){return Object.keys(e).map(function(t){return e[t]}).join(\",\")},U=[\"default\",\"processing\",\"success\",\"error\"],X=[\"\\u8349\\u7a3f\",\"\\u5904\\u7406\\u4e2d\",\"\\u5df2\\u5b8c\\u6210\",\"\\u5f02\\u5e38\"],J=O[\"a\"].create()(function(e){var t=e.modalVisible,a=e.form,l=e.handleAdd,r=e.handleModalVisible,n=e.initInfo,s=n.countryItems,i=n.presentCityItems,o=n.typeItems,c=function(){a.validateFields(function(e,t){e||(a.resetFields(),l(t))})};return R.a.createElement(x[\"a\"],{destroyOnClose:!0,title:\"\\u65b0\\u5efa\\u7b7e\\u8bc1\\u7533\\u8bf7\",visible:t,onOk:c,onCancel:function(){return r()}},R.a.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u8ba2\\u5355\\u7f16\\u53f7\"},a.getFieldDecorator(\"appOrderNo\",{rules:[{required:!0,message:\"\\u8bf7\\u8f93\\u5165\\u8ba2\\u5355\\u7f16\\u53f7\\uff01\"}]})(R.a.createElement(M[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\"}))),R.a.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u7533\\u8bf7\\u4eba\"},a.getFieldDecorator(\"applicant\",{rules:[{required:!0,message:\"\\u8bf7\\u8f93\\u5165\\u7533\\u8bf7\\u4eba\\u59d3\\u540d\\uff01\"}]})(R.a.createElement(M[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\"}))),R.a.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u7533\\u8bf7\\u56fd\\u5bb6\"},a.getFieldDecorator(\"country\",{rules:[{required:!0,message:\"\\u8bf7\\u9009\\u62e9\\u7533\\u8bf7\\u56fd\\u5bb6\\uff01\"}]})(R.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\",style:{width:\"100%\"}},s))),R.a.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u7b7e\\u8bc1\\u7c7b\\u578b\"},a.getFieldDecorator(\"type\",{rules:[{required:!0,message:\"\\u8bf7\\u9009\\u62e9\\u7b7e\\u8bc1\\u7c7b\\u578b\\uff01\"}]})(R.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\",style:{width:\"100%\"}},o))),R.a.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u9001\\u7b7e\\u57ce\\u5e02\"},a.getFieldDecorator(\"city\",{rules:[{required:!0,message:\"\\u8bf7\\u9009\\u62e9\\u9001\\u7b7e\\u57ce\\u5e02\\uff01\"}]})(R.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\",style:{width:\"100%\"}},i))),R.a.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u8bc1\\u4ef6\\u53f7\\u7801\"},a.getFieldDecorator(\"docNo\",{rules:[{required:!0,message:\"\\u8bf7\\u8f93\\u5165\\u8bc1\\u4ef6\\u53f7\\u7801\\uff01\"}]})(R.a.createElement(M[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\"}))),R.a.createElement(z,{labelCol:{span:5},wrapperCol:{span:15},label:\"\\u8054\\u7cfb\\u7535\\u8bdd\"},a.getFieldDecorator(\"phone\",{rules:[{required:!0,message:\"\\u8bf7\\u8f93\\u5165\\u8054\\u7cfb\\u7535\\u8bdd\\uff01\"}]})(R.a.createElement(M[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\"}))))}),Z=(l=Object(q[\"connect\"])(function(e){var t=e.visaList,a=e.loading;return{visaList:t,loading:a.models.visaList}}),r=O[\"a\"].create(),l(n=r((s=function(e){function t(){var e,a;g()(this,t);for(var l=arguments.length,r=new Array(l),n=0;n<l;n++)r[n]=arguments[n];return a=I()(this,(e=k()(t)).call.apply(e,[this].concat(r))),a.state={modalVisible:!1,expandForm:!1,selectedRows:[],formValues:{}},a.handleStandardTableChange=function(e,t,l){var r=a.props.dispatch,n=a.state.formValues,s=Object.keys(t).reduce(function(e,a){var l=E()({},e);return l[a]=Q(t[a]),l},{}),i=E()({currentPage:e.current,pageSize:e.pageSize},n,s);l.field&&(i.sorter=\"\".concat(l.field,\"_\").concat(l.order)),r({type:\"visaList/fetch\",payload:i})},a.previewItem=function(e){T[\"a\"].push(\"/visa/applform/\".concat(e))},a.handleFormReset=function(){var e=a.props,t=e.form,l=e.dispatch;t.resetFields(),a.setState({formValues:{}}),l({type:\"visaList/fetch\",payload:{}})},a.toggleForm=function(){var e=a.state.expandForm;a.setState({expandForm:!e})},a.handleSelectRows=function(e){a.setState({selectedRows:e})},a.handleSearch=function(e){e.preventDefault();var t=a.props,l=t.dispatch,r=t.form;r.validateFields(function(e,t){if(!e){var r=E()({},t,{updatedAt:t.updatedAt&&t.updatedAt.valueOf()});a.setState({formValues:r}),l({type:\"visaList/fetch\",payload:r})}})},a.handleModalVisible=function(e){a.setState({modalVisible:!!e})},a.handleUpdateModalVisible=function(e,t){T[\"a\"].push(\"/visa/applform/\".concat(t.id))},a.handleAdd=function(e){var t=a.props.dispatch;t({type:\"visaList/add\",payload:E()({},e)}),a.handleModalVisible()},a.handleUpdate=function(e){var t=a.props.dispatch,l=a.state.formValues;t({type:\"visaList/update\",payload:{query:l,body:{name:e.name,desc:e.desc,key:e.key}}}),y[\"a\"].success(\"\\u914d\\u7f6e\\u6210\\u529f\"),a.handleUpdateModalVisible()},a}return S()(t,e),C()(t,[{key:\"componentDidMount\",value:function(){var e=this.props.dispatch;e({type:\"visaList/init\"}),e({type:\"visaList/fetch\"})}},{key:\"renderSimpleForm\",value:function(e){var t=e.countryItems,a=e.typeItems,l=this.props.form.getFieldDecorator;return R.a.createElement(O[\"a\"],{onSubmit:this.handleSearch,layout:\"inline\"},R.a.createElement(p[\"a\"],{gutter:{md:8,lg:24,xl:48}},R.a.createElement(v[\"a\"],{md:8,sm:24},R.a.createElement(z,{label:\"\\u7533\\u8bf7\\u56fd\\u5bb6\"},l(\"country\")(R.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"}},t)))),R.a.createElement(v[\"a\"],{md:8,sm:24},R.a.createElement(z,{label:\"\\u7b7e\\u8bc1\\u7c7b\\u578b\"},l(\"type\")(R.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"}},a)))),R.a.createElement(v[\"a\"],{md:8,sm:24},R.a.createElement(\"span\",{className:P.a.submitButtons},R.a.createElement(h[\"a\"],{type:\"primary\",htmlType:\"submit\"},\"\\u67e5\\u8be2\"),R.a.createElement(h[\"a\"],{style:{marginLeft:8},onClick:this.handleFormReset},\"\\u91cd\\u7f6e\"),R.a.createElement(\"a\",{style:{marginLeft:8},onClick:this.toggleForm},\"\\u5c55\\u5f00 \",R.a.createElement(u[\"a\"],{type:\"down\"}))))))}},{key:\"renderAdvancedForm\",value:function(e){var t=e.countryItems,a=e.presentCityItems,l=e.typeItems,r=e.statusItems,n=this.props.form.getFieldDecorator;return R.a.createElement(O[\"a\"],{onSubmit:this.handleSearch,layout:\"inline\"},R.a.createElement(p[\"a\"],{gutter:{md:8,lg:24,xl:48}},R.a.createElement(v[\"a\"],{md:8,sm:24},R.a.createElement(z,{label:\"\\u7533\\u8bf7\\u56fd\\u5bb6\"},n(\"country\")(R.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"}},t)))),R.a.createElement(v[\"a\"],{md:8,sm:24},R.a.createElement(z,{label:\"\\u7b7e\\u8bc1\\u7c7b\\u578b\"},n(\"type\")(R.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"}},l)))),R.a.createElement(v[\"a\"],{md:8,sm:24},R.a.createElement(z,{label:\"\\u72b6\\u6001\"},n(\"Status\")(R.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"}},r))))),R.a.createElement(p[\"a\"],{gutter:{md:8,lg:24,xl:48}},R.a.createElement(v[\"a\"],{md:8,sm:24},R.a.createElement(z,{label:\"\\u7533\\u8bf7\\u4eba\"},n(\"applicant\")(R.a.createElement(M[\"a\"],{placeholder:\"\\u8bf7\\u8f93\\u5165\",style:{width:\"100%\"}})))),R.a.createElement(v[\"a\"],{md:8,sm:24},R.a.createElement(z,{label:\"\\u9001\\u7b7e\\u57ce\\u5e02\"},n(\"presentCity\")(R.a.createElement(D[\"a\"],{placeholder:\"\\u8bf7\\u9009\\u62e9\",style:{width:\"100%\"}},a)))),R.a.createElement(v[\"a\"],{md:8,sm:24},R.a.createElement(z,{label:\"\\u521b\\u5efa\\u65e5\\u671f\"},n(\"date\")(R.a.createElement(m[\"a\"],{style:{width:\"100%\"},placeholder:\"\\u8bf7\\u8f93\\u5165\\u521b\\u5efa\\u65e5\\u671f\"}))))),R.a.createElement(\"div\",{style:{overflow:\"hidden\"}},R.a.createElement(\"div\",{style:{marginBottom:24}},R.a.createElement(h[\"a\"],{type:\"primary\",htmlType:\"submit\"},\"\\u67e5\\u8be2\"),R.a.createElement(h[\"a\"],{style:{marginLeft:8},onClick:this.handleFormReset},\"\\u91cd\\u7f6e\"),R.a.createElement(\"a\",{style:{marginLeft:8},onClick:this.toggleForm},\"\\u6536\\u8d77 \",R.a.createElement(u[\"a\"],{type:\"up\"})))))}},{key:\"renderForm\",value:function(e){var t=this.state.expandForm;return t?this.renderAdvancedForm(e):this.renderSimpleForm(e)}},{key:\"render\",value:function(){var e=this,t=this.props,a=t.visaList,l=a.visaList,r=a.initInfo,n=t.loading,s={list:l},i=r.countries,m=r.presentCities,p=r.types,u=r.statusOpts,v={};if(i)for(var y=0;y<i.length;y+=1){var f=i[y];v[f.value]=f.label}var E={};if(p)for(var b=0;b<p.length;b+=1){var g=p[b];E[g.value]=g.label}var w={};if(m)for(var C=0;C<m.length;C+=1){var F=m[C];w[F.value]=F.label}var I=[];i&&(I=i.map(function(e){return R.a.createElement(H,{key:e.value,value:e.value},e.label)}));var L=[];m&&(L=m.map(function(e){return R.a.createElement(H,{key:e.value,value:e.value},e.label)}));var k=[];p&&(k=p.map(function(e){return R.a.createElement(H,{key:e.value,value:e.value},e.label)}));var V=[];u&&(V=u.map(function(e){return R.a.createElement(H,{key:e.value,value:e.value},e.label)}));var S={countryItems:I,presentCityItems:L,typeItems:k,statusItems:V},x=this.state,M=x.selectedRows,D=x.modalVisible,O={handleAdd:this.handleAdd,handleModalVisible:this.handleModalVisible},q=[{title:\"\\u8ba2\\u5355\\u7f16\\u53f7\",dataIndex:\"appOrderNo\",render:function(t,a){return R.a.createElement(\"a\",{onClick:function(){return e.previewItem(a.id)}},t)}},{title:\"\\u7533\\u8bf7\\u4eba\",dataIndex:\"applicant\",render:function(e){return e}},{title:\"\\u56fd\\u5bb6\",dataIndex:\"country\",sorter:!0,render:function(e){return v[e]?v[e]:e}},{title:\"\\u7b7e\\u8bc1\\u7c7b\\u578b\",dataIndex:\"type\",sorter:!0,render:function(e){return E[e]?E[e]:e}},{title:\"\\u9001\\u7b7e\\u57ce\\u5e02\",dataIndex:\"city\",sorter:!0,render:function(e){return w[e]?w[e]:e}},{title:\"\\u521b\\u5efa\\u65f6\\u95f4\",dataIndex:\"createdAt\",sorter:!0,render:function(e){return R.a.createElement(\"span\",null,j()(e).format(\"YYYY-MM-DD HH:mm:ss\"))}},{title:\"\\u72b6\\u6001\",dataIndex:\"status\",render:function(e){return R.a.createElement(d[\"a\"],{status:U[e],text:X[e]})}},{title:\"\\u64cd\\u4f5c\",render:function(t,a){return R.a.createElement(A[\"Fragment\"],null,R.a.createElement(\"a\",{onClick:function(){return e.handleUpdateModalVisible(!0,a)}},\"\\u4fee\\u6539\"))}}];return R.a.createElement(B[\"a\"],{title:\"\\u7b7e\\u8bc1\\u4fe1\\u606f\\u7ba1\\u7406\"},R.a.createElement(c[\"a\"],{bordered:!1},R.a.createElement(\"div\",{className:P.a.tableList},R.a.createElement(\"div\",{className:P.a.tableListForm},this.renderForm(S)),R.a.createElement(\"div\",{className:P.a.tableListOperator},R.a.createElement(h[\"a\"],{icon:\"plus\",type:\"primary\",onClick:function(){return e.handleModalVisible(!0)}},\"\\u65b0\\u5efa\"),M.length>0&&R.a.createElement(\"span\",null,R.a.createElement(h[\"a\"],null,\"\\u5220\\u9664\"))),R.a.createElement(Y[\"a\"],{rowKey:\"id\",selectedRows:M,loading:n,data:s,columns:q,onSelectRow:this.handleSelectRows,onChange:this.handleStandardTableChange}))),R.a.createElement(J,o()({},O,{modalVisible:D,initInfo:S})))}}]),t}(A[\"PureComponent\"]),n=s))||n)||n);t[\"default\"]=Z}}]);","extractedComments":[]}